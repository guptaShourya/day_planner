var e,t=require("react"),o=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,n=require("crypto-js");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var i=window,c=t.forwardRef(function(e,n){var a=e.state,c=void 0===a?"":a,s=e.client_id,u=e.className,l=e.redirect_uri,d=e.scope,m=void 0===d?"profile":d,h=e.scope_data,f=void 0===h?{profile:{essential:!0}}:h,p=e.response_type,g=void 0===p?"token":p,v=e.children,_=e.onReject,w=e.onResolve,b=e.onLogoutSuccess,k=e.onLoginStart,y=t.useState(!1),S=y[0],C=y[1],L=t.useState(!1),I=L[0],j=L[1],E=t.useState(!1),P=E[0],R=E[1];t.useEffect(function(){!I&&A()},[I]);var N=t.useCallback(function(){return!!document.getElementById("amazon-login")},[]),z=t.useCallback(function(e,t,o,n,r){void 0===t&&(t="script");var a=e.createElement(t);a.id=o,a.src=n,a.async=!0,a.defer=!0;var i=document.getElementsByTagName("script")[0];i&&i.parentNode&&i.parentNode.insertBefore(a,i),a.onload=r},[]),T=t.useCallback(function(e){try{return fetch("https://api.amazon.com/user/profile",{headers:{Authorization:"Bearer "+e.access_token}}).then(function(e){return e.json()}).then(function(t){w({provider:"amazon",data:r({},t,e)})}).catch(function(e){_(e)}).finally(function(){R(!1),C(!0)}),Promise.resolve()}catch(e){return Promise.reject(e)}},[_,w]),U=t.useCallback(function(e){return T(e)},[T]),x=t.useCallback(function(e){R(!1),_(e)},[_]),A=t.useCallback(function(){N()?j(!0):z(document,"script","amazon-login","https://assets.loginwithamazon.com/sdk/na/login1.js",function(){i.amazon.Login.setClientId(s),j(!0)})},[N,s,z]),O=t.useCallback(function(){!P&&I&&(R(!0),i.amazon?(k&&k(),i.amazon.Login.authorize({scope:m,scope_data:f,response_type:g,redirect_uri:l,state:c},function(e){e.error?x(e.error):U(e)})):(R(!1),A(),_("Google SDK isn't loaded!")))},[P,I,A,_,k,m,f,g,l,c,x,U]);return t.useImperativeHandle(n,function(){return{onLogout:function(){S?(C(!1),i.amazon.Login.logout(),b&&b()):console.log("You must login before logout.")}}}),o.createElement("div",{className:u,onClick:O},v)}),s=t.memo(c),u=window,l=t.forwardRef(function(e,n){var a=e.appId,i=e.scope,c=void 0===i?"email,public_profile":i,s=e.state,l=void 0===s||s,d=e.xfbml,m=void 0===d||d,h=e.cookie,f=void 0===h||h,p=e.version,g=void 0===p?"v2.7":p,v=e.language,_=void 0===v?"en_EN":v,w=e.auth_type,b=void 0===w?"":w,k=e.className,y=e.onLoginStart,S=e.onLogoutSuccess,C=e.onReject,L=e.onResolve,I=e.redirect_uri,j=e.fieldsProfile,E=void 0===j?"id,first_name,last_name,middle_name,name,name_format,picture,short_name":j,P=e.response_type,R=void 0===P?"code":P,N=e.return_scopes,z=void 0===N||N,T=e.children,U=t.useState(!1),x=U[0],A=U[1],O=t.useState(!1),B=O[0],H=O[1],F=t.useState(!1),G=F[0],M=F[1];t.useEffect(function(){!B&&J()},[B]);var Y=t.useCallback(function(e,t){var o=e.createElement("script");o.id="facebook-jssdk",o.src="https://connect.facebook.net/en_EN/sdk.js";var n=e.getElementsByTagName("script")[0];n&&n.parentNode&&n.parentNode.insertBefore(o,n),t()},[]),K=t.useCallback(function(){return!!document.getElementById("facebook-jssdk")},[]),D=t.useCallback(function(e,t){var o=window;o.fbAsyncInit=function(){o.FB&&o.FB.init(r({},e)),H(!0);var n=t.getElementById("fb-root");n||((n=t.createElement("div")).id="fb-root",t.body.appendChild(n))}},[]),q=t.useCallback(function(e){u.FB.api("/me",{locale:_,fields:E},function(t){A(!0),M(!1),L({provider:"facebook",data:r({},e,t)})})},[E,_,L]),V=t.useCallback(function(e){e.authResponse?q(e.authResponse):C(e)},[q,C]),J=t.useCallback(function(){K()?H(!0):Y(document,function(){D({appId:a,xfbml:m,version:g,state:l,cookie:f,redirect_uri:I,response_type:R},document)})},[l,a,m,f,g,D,I,R,Y,K]),$=t.useCallback(function(){!G&&B&&(M(!0),u.FB?(y&&y(),u.FB.login(V,{scope:c,return_scopes:z,auth_type:b})):(M(!1),J(),C("Fb isn't loaded!")))},[G,B,J,C,y,V,c,z,b]);return t.useImperativeHandle(n,function(){return{onLogout:function(){x?(console.log("ðŸš€ ~ file: index.tsx ~ line 202 ~ useImperativeHandle ~ isLogged",x),A(!1),S&&S(),u.FB.logout()):console.log("You must login before logout.")}}}),o.createElement("div",{className:k,onClick:$},T)}),d=t.memo(l),m=window,h=t.forwardRef(function(e,n){var r=e.client_id,a=e.scope,i=void 0===a?"email profile":a,c=e.prompt,s=void 0===c?"select_account":c,u=e.ux_mode,l=e.className,d=void 0===l?"":l,h=e.login_hint,f=void 0===h?"":h,p=e.access_type,g=void 0===p?"online":p,v=e.onLogoutFailure,_=e.onLogoutSuccess,w=e.onLoginStart,b=e.onReject,k=e.onResolve,y=e.redirect_uri,S=void 0===y?"/":y,C=e.cookie_policy,L=void 0===C?"single_host_origin":C,I=e.hosted_domain,j=void 0===I?"":I,E=e.discoveryDocs,P=void 0===E?"":E,R=e.children,N=e.fetch_basic_profile,z=void 0===N||N,T=t.useState(!1),U=T[0],x=T[1],A=t.useState(!1),O=A[0],B=A[1],H=t.useState(!1),F=H[0],G=H[1];t.useEffect(function(){!O&&q()},[O]);var M=t.useCallback(function(){return!!document.getElementById("google-login")},[]),Y=t.useCallback(function(e,t,o,n,r){void 0===t&&(t="script");var a=e.createElement(t);a.id=o,a.src=n,a.async=!0,a.defer=!0;var i=document.getElementsByTagName("script")[0];i&&i.parentNode&&i.parentNode.insertBefore(a,i),a.onload=r},[]),K=t.useCallback(function(e){x(!0),G(!1);var t={};Object.values(e).filter(function(e){return"string"==typeof e||(null==e?void 0:e.access_token)}).forEach(function(e){"string"==typeof e?t.provider_id=e:Object.entries(e).map(function(e){return t[e[0]]=e[1]})});var o=m.gapi.auth2.getAuthInstance();if(o.isSignedIn.get()){var n=o.currentUser.get().getBasicProfile();t.id=n.getId(),t.name=n.getName(),t.firstName=n.getGivenName(),t.lastName=n.getFamilyName(),t.avatar=n.getImageUrl(),t.email=n.getEmail()}k({provider:"google",data:t})},[k]),D=t.useCallback(function(e){console.log("ðŸš€ ~ file: index.tsx ~ line 129 ~ err",e),G(!1),b(e)},[b]),q=t.useCallback(function(){M()?B(!0):Y(document,"script","google-login","https://apis.google.com/js/api.js",function(){var e={client_id:r,cookie_policy:L,login_hint:f,hosted_domain:j,fetch_basic_profile:z,discoveryDocs:P,ux_mode:u,redirect_uri:S,access_type:g,scope:"",immediate:!0};m.gapi.load("auth2",function(){var t=m.gapi.auth2;t.getAuthInstance()?b("not exist an instance"):t.init(e).then(function(){B(!0)})})})},[u,b,r,f,g,S,P,L,j,Y,z,M]),V=t.useCallback(function(){!F&&O&&(G(!0),m.gapi?(w&&w(),m.gapi.auth2.getAuthInstance().signIn({prompt:s,scope:i,ux_mode:u}).then(K).catch(D)):(G(!1),q(),b("Google SDK isn't loaded!")))},[F,O,q,b,w,s,i,u,K,D]);return t.useImperativeHandle(n,function(){return{onLogout:function(){U?(x(!1),m.gapi.auth2.getAuthInstance().signOut().then(function(){_&&_()}).catch(function(e){console.log(e),v&&v()})):console.log("You must login before logout.")}}}),o.createElement("div",{className:d,onClick:V},R)}),f=t.memo(h),p=t.forwardRef(function(e,n){var i=e.state,c=void 0===i?"":i,s=e.scope,u=void 0===s?"repo,gist":s,l=e.client_id,d=e.client_secret,m=e.className,h=void 0===m?"":m,f=e.redirect_uri,p=e.allow_signup,g=void 0!==p&&p,v=e.children,_=e.onReject,w=e.onResolve,b=e.onLoginStart,k=e.onLogoutSuccess,y=t.useState(!1),S=y[0],C=y[1],L=t.useState(!1),I=L[0],j=L[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_github")&&t&&(localStorage.setItem("github",t),window.close())},[]);var E=t.useCallback(function(e){fetch("https://cors.bridged.cc/https://api.github.com//user",{method:"GET",headers:{Authorization:"token "+e.access_token}}).then(function(e){return e.json()}).then(function(t){C(!0),j(!1),w({provider:"github",data:r({},t,e)})}).catch(function(e){j(!1),_(e)})},[_,w]),P=t.useCallback(function(e){var t={code:e,state:c,redirect_uri:f,client_id:l,client_secret:d},o=new Headers({"Content-Type":"application/x-www-form-urlencoded"});fetch("https://cors.bridged.cc/https://github.com/login/oauth/access_token",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.text()}).then(function(e){j(!1);for(var t,o={},n=function(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(e,void 0):void 0}}(e))){o&&(e=o);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=e[Symbol.iterator]()).next.bind(o)}(new URLSearchParams(e));!(t=n()).done;){var r=t.value;o[r[0]]=r[1]}o.access_token?E(o):_("no data")}).catch(function(e){j(!1),_(e)})},[l,d,E,_,f,c]),R=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"github"===n&&o&&P(o))}catch(e){return Promise.reject(e)}},[P]),N=t.useCallback(function(){window.removeEventListener("storage",N,!1);var e=localStorage.getItem("github");e&&(j(!0),R({provider:"github",type:"code",code:e}),localStorage.removeItem("instagram"))},[R]),z=t.useCallback(function(){if(!I){b&&b(),window.addEventListener("storage",N,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://github.com/login/oauth/authorize?client_id="+l+"&scope="+u+"&state="+c+"_github&redirect_uri="+f+"&allow_signup="+g,"Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)}},[I,b,N,l,u,c,f,g]);return t.useImperativeHandle(n,function(){return{onLogout:function(){S?(C(!1),k&&k()):console.log("You must login before logout.")}}}),o.createElement("div",{className:h,onClick:z},v)}),g=t.memo(p),v=t.forwardRef(function(e,n){var a=e.state,i=void 0===a?"":a,c=e.client_id,s=e.client_secret,u=e.className,l=e.redirect_uri,d=e.scope,m=void 0===d?"user_profile,user_media":d,h=e.response_type,f=void 0===h?"code":h,p=e.children,g=e.onLogoutSuccess,v=e.onReject,_=e.onResolve,w=e.onLoginStart,b=t.useState(!1),k=b[0],y=b[1],S=t.useState(!1),C=S[0],L=S[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_instagram")&&t&&(localStorage.setItem("instagram",t),window.close())},[]);var I=t.useCallback(function(e){fetch("https://cors.bridged.cc/https://graph.instagram.com//me?fields=id,username,account_type,media_count&access_token="+e.access_token,{method:"GET"}).then(function(e){return e.json()}).then(function(t){y(!0),L(!1),_({provider:"instagram",data:r({},t,e)})}).catch(function(e){L(!1),v(e)})},[v,_]),j=t.useCallback(function(e){var t={grant_type:"authorization_code",code:e,redirect_uri:l,client_id:c,client_secret:s},o=new Headers({"Content-Type":"application/x-www-form-urlencoded"});fetch("https://cors.bridged.cc/https://api.instagram.com/oauth/access_token",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.json()}).then(function(e){e.access_token?I(e):v("no data")}).catch(function(e){v(e)}).finally(function(){L(!1)})},[c,s,I,v,l]),E=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"instagram"===n&&o&&j(o))}catch(e){return Promise.reject(e)}},[j]),P=t.useCallback(function(){window.removeEventListener("storage",P,!1);var e=localStorage.getItem("instagram");e&&(L(!0),E({provider:"instagram",type:"code",code:e}),localStorage.removeItem("instagram"))},[E]),R=t.useCallback(function(){if(!C){w&&w(),window.addEventListener("storage",P,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://api.instagram.com/oauth/authorize?response_type="+f+"&client_id="+c+"&scope="+m+"&state="+i+"_instagram&redirect_uri="+l,"Instagram","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)}},[C,w,P,f,c,m,i,l]);return t.useImperativeHandle(n,function(){return{onLogout:function(){k?(y(!1),g&&g()):console.log("You must login before logout.")}}}),o.createElement("div",{className:u,onClick:R},p)}),_=t.memo(v),w=t.forwardRef(function(e,n){var a=e.tenant,i=void 0===a?"common":a,c=e.state,s=void 0===c?"":c,u=e.client_id,l=e.className,d=e.redirect_uri,m=e.scope,h=void 0===m?"profile openid email":m,f=e.response_type,p=void 0===f?"code":f,g=e.response_mode,v=void 0===g?"query":g,_=e.children,w=e.code_challenge,b=void 0===w?"19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9":w,k=e.code_challenge_method,y=void 0===k?"plain":k,S=e.prompt,C=void 0===S?"select_account":S,L=e.onLogoutSuccess,I=e.onLoginStart,j=e.onReject,E=e.onResolve,P=t.useState(!1),R=P[0],N=P[1],z=t.useState(!1),T=z[0],U=z[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_microsoft")&&t&&(localStorage.setItem("microsoft",t),window.close())},[]);var x=t.useCallback(function(e){fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{Authorization:"Bearer "+e.access_token}}).then(function(e){return e.json()}).then(function(t){U(!1),N(!0),E({provider:"microsoft",data:r({},t,e)})}).catch(function(e){U(!1),j(e)})},[j,E]),A=t.useCallback(function(e){var t={code:e,scope:h,client_id:u,redirect_uri:d,code_verifier:b,grant_type:"authorization_code"},o=new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});fetch("https://login.microsoftonline.com/"+i+"/oauth2/v2.0/token",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.json()}).then(function(e){e.access_token?x(e):(U(!1),j("no data"))}).catch(function(e){U(!1),j(e)})},[h,i,j,u,x,d,b]),O=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"microsoft"===n&&o&&A(o))}catch(e){return Promise.reject(e)}},[A]),B=t.useCallback(function(){window.removeEventListener("storage",B,!1);var e=localStorage.getItem("microsoft");e&&(U(!0),O({provider:"microsoft",type:"code",code:e}),localStorage.removeItem("microsoft"))},[O]),H=t.useCallback(function(){if(!T){I&&I(),window.addEventListener("storage",B,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://login.microsoftonline.com/"+i+"/oauth2/v2.0/authorize?client_id="+u+"\n        &response_type="+p+"\n        &redirect_uri="+d+"\n        &response_mode="+v+"\n        &scope="+h+"\n        &state="+s+"_microsoft\n        &prompt="+C+"\n        &code_challenge="+b+"\n        &code_challenge_method="+y,"Microsoft","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)}},[T,I,B,i,u,p,d,v,h,s,C,b,y]);return t.useImperativeHandle(n,function(){return{onLogout:function(){R?(N(!1),L&&L()):console.log("You must login before logout.")}}}),o.createElement("div",{className:l,onClick:H},_)}),b=t.memo(w),k=t.forwardRef(function(e,n){var a=e.state,i=void 0===a?"":a,c=e.scope,s=void 0===c?"r_liteprofile":c,u=e.client_id,l=e.client_secret,d=e.className,m=void 0===d?"":d,h=e.redirect_uri,f=e.response_type,p=void 0===f?"code":f,g=e.children,v=e.onLoginStart,_=e.onLogoutSuccess,w=e.onReject,b=e.onResolve,k=t.useState(!1),y=k[0],S=k[1],C=t.useState(!1),L=C[0],I=C[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_linkedin")&&t&&(localStorage.setItem("linkedin",t),window.close())},[]);var j=t.useCallback(function(e){fetch("https://api.allorigins.win/get?url="+encodeURIComponent("https://api.linkedin.com/v2/me?oauth2_access_token="+e.access_token+"&projection=(id,profilePicture(displayImage~digitalmediaAsset:playableStreams),localizedLastName, firstName,lastName,localizedFirstName)"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var o=r({},e);if(t.contents){var n=JSON.parse(t.contents);"object"==typeof e&&Object.entries(n).map(function(e){o[e[0]]=e[1]})}S(!0),I(!1),b({provider:"linkedin",data:o})}).catch(function(e){I(!1),w(e)})},[w,b]),E=t.useCallback(function(e){var t={code:e,grant_type:"authorization_code",redirect_uri:h,client_id:u,client_secret:l},o=new Headers({"Content-Type":"application/x-www-form-urlencoded"});fetch("https://cors.bridged.cc/https://www.linkedin.com/oauth/v2/accessToken",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.json()}).then(function(e){j(e)}).catch(function(e){I(!1),w(e)})},[u,l,j,w,h]),P=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"linkedin"===n&&o&&E(o))}catch(e){return Promise.reject(e)}},[E]),R=t.useCallback(function(){window.removeEventListener("storage",R,!1);var e=localStorage.getItem("linkedin");e&&(I(!0),P({provider:"linkedin",type:"code",code:e}),localStorage.removeItem("linkedin"))},[P]),N=t.useCallback(function(){if(!L){v&&v(),window.addEventListener("storage",R,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://www.linkedin.com/oauth/v2/authorization?response_type="+p+"&client_id="+u+"&scope="+s+"&state="+i+"_linkedin&redirect_uri="+h,"Linkedin","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)}},[L,v,R,p,u,s,i,h]);return t.useImperativeHandle(n,function(){return{onLogout:function(){y?(S(!1),_&&_()):console.log("You must login before logout.")}}}),o.createElement("div",{className:m,onClick:N},g)}),y=t.memo(k),S=t.forwardRef(function(e,n){var a=e.state,i=void 0===a?"":a,c=e.scope,s=void 0===c?"":c,u=e.client_id,l=e.client_secret,d=e.className,m=void 0===d?"":d,h=e.redirect_uri,f=e.children,p=e.onLoginStart,g=e.onLogoutSuccess,v=e.onReject,_=e.onResolve,w=t.useState(!1),b=w[0],k=w[1],y=t.useState(!1),S=y[0],C=y[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_pinterest")&&t&&(localStorage.setItem("pinterest",t),window.close())},[]);var L=t.useCallback(function(e){fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/user_account",{method:"GET",headers:{Authorization:"Bearer "+e.access_token}}).then(function(e){return e.json()}).then(function(t){k(!0),C(!1),_({provider:"pinterest",data:r({},e,t)})}).catch(function(e){return v(e)})},[v,_]),I=t.useCallback(function(e){try{var t={code:e,redirect_uri:h,grant_type:"authorization_code"},o=[];for(var n in t){var r=encodeURIComponent(n),a=encodeURIComponent(t[n]);o.push(r+"="+a)}return o=o.join("&"),Promise.resolve(fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/oauth/token",{method:"POST",headers:{Authorization:"Basic "+btoa(u+":"+l),"Content-Type":"application/x-www-form-urlencoded"},body:o}).then(function(e){return e.json()}).catch(function(e){return v(e)})).then(function(e){L(e)})}catch(e){return Promise.reject(e)}},[u,l,L,v,h]),j=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"pinterest"===n&&o&&I(o))}catch(e){return Promise.reject(e)}},[I]),E=t.useCallback(function(){window.removeEventListener("storage",E,!1);var e=localStorage.getItem("pinterest");e&&(C(!0),j({provider:"pinterest",type:"code",code:e}),localStorage.removeItem("pinterest"))},[j]),P=t.useCallback(function(){if(!S){p&&p(),window.addEventListener("storage",E,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://www.pinterest.com/oauth/?client_id="+u+"&scope="+s+"&state="+i+"_pinterest&redirect_uri="+h+"&response_type=code&scope=boards:read,pins:read,user_accounts:read","Pinterest","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)}},[S,p,E,u,s,i,h]);return t.useImperativeHandle(n,function(){return{onLogout:function(){b?(k(!1),g&&g()):console.log("You must login before logout.")}}}),o.createElement("div",{className:m,onClick:P},f)}),C=t.memo(S),L=function(e,t,o,a,i){void 0===i&&(i="");var c=Object.keys(e).sort().reduce(function(t,o){return t+"&"+o+"="+e[o]},"").substr(1),s=t.toUpperCase()+"&"+encodeURIComponent(o)+"&"+encodeURIComponent(c),u=encodeURIComponent(a)+"&"+encodeURIComponent(i),l=n.enc.Base64.stringify(n.HmacSHA1(s,u)),d=r({},e,{oauth_signature:encodeURIComponent(l)});return Object.keys(d).sort().reduce(function(e,t){return e+","+t+'="'+d[t]+'"'},"").substr(1)},I=function(e){return e.split("&").reduce(function(e,t){var o,n=t.split("=");return r({},e,((o={})[n[0]]=n[1],o))},{})},j="https://api.twitter.com",E=t.forwardRef(function(e,n){var a=e.client_id,i=e.client_secret,c=e.className,s=void 0===c?"":c,u=e.redirect_uri,l=e.children,d=e.onLoginStart,m=e.onLogoutSuccess,h=e.onReject,f=e.onResolve,p=t.useState(!1),g=p[0],v=p[1],_=t.useState(!1),w=_[0],b=_[1];t.useEffect(function(){var e=new URL(window.location.href),t=e.searchParams.get("oauth_verifier"),o=e.searchParams.get("oauth_token");o&&t&&(localStorage.setItem("twitter",t+"&"+o),window.close())},[]);var k=t.useCallback(function(e){var t,o,n,c,s,u,l,d=(o=(t={method:"GET",apiUrl:j+"/1.1/account/verify_credentials.json",consumerKey:a,consumerSecret:i,oauthToken:e.oauth_token,oauthTokenSecret:e.oauth_token_secret}).consumerSecret,n=t.oauthToken,c=t.oauthTokenSecret,s=t.method,u=t.apiUrl,l={oauth_consumer_key:t.consumerKey,oauth_nonce:Math.random().toString(36).replace(/[^a-z]/,"").substr(2),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:(Date.now()/1e3).toFixed(),oauth_token:n,oauth_version:"1.0"},L(l,s,u,o,c));fetch("https://cors.bridged.cc/https://api.twitter.com/1.1/account/verify_credentials.json",{method:"GET",headers:{Authorization:"OAuth "+d}}).then(function(e){return e.json()}).then(function(t){v(!0),f({provider:"twitter",data:r({},e,t)}),b(!1)}).catch(function(e){return h(e)})},[a,i,h,f]),y=t.useCallback(function(e){try{var t=e.split("&"),o=(r=(n={method:"POST",apiUrl:j+"/oauth/access_token",consumerKey:a,consumerSecret:i,oauthToken:t[1],oauthVerifier:t[0]}).consumerSecret,s=n.method,u=n.apiUrl,l={oauth_consumer_key:n.consumerKey,oauth_version:"1.0",oauth_signature_method:"HMAC-SHA1",oauth_token:n.oauthToken,oauth_verifier:c=n.oauthVerifier,oauth_timestamp:(Date.now()/1e3).toFixed(),oauth_nonce:Math.random().toString(36).replace(/[^a-z]/,"").substr(2)},L(l,s,u,r,c));return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/oauth/access_token",{method:"POST",headers:{Authorization:"OAuth "+o}}).then(function(e){return e.text()}).then(function(e){return I(e)}).catch(function(e){return h(e)})).then(function(e){e&&k(e)})}catch(e){return Promise.reject(e)}var n,r,c,s,u,l},[a,i,k,h]),S=t.useCallback(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"twitter"===n&&o&&y(o))}catch(e){return Promise.reject(e)}},[y]),C=t.useCallback(function(){window.removeEventListener("storage",C,!1);var e=localStorage.getItem("twitter");e&&(b(!0),S({provider:"twitter",type:"code",code:e}),localStorage.removeItem("twitter"))},[S]),E=t.useCallback(function(){try{var e=function(){if(!w){d&&d();var e=function(e){var t=e.method,o=e.apiUrl,n=e.consumerSecret,r={oauth_consumer_key:e.consumerKey,oauth_version:"1.0",oauth_signature_method:"HMAC-SHA1",oauth_callback:e.callbackUrl,oauth_timestamp:(Date.now()/1e3).toFixed(),oauth_nonce:Math.random().toString(36).replace(/[^a-z]/,"").substr(2)};return L(r,t,o,n)}({method:"POST",apiUrl:j+"/oauth/request_token",callbackUrl:u,consumerKey:a,consumerSecret:i});return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/oauth/request_token",{method:"POST",headers:{Authorization:"OAuth "+e}}).then(function(e){return e.text()}).catch(function(e){return h(e)})).then(function(e){if(e){var t=I(e);window.addEventListener("storage",C,!1);var o=window.screen.width/2-225,n=window.screen.height/2-365;window.open(j+"/oauth/authenticate?oauth_token="+t.oauth_token,"twitter","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+n+", left="+o)}})}}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[w,d,u,a,i,h,C]);return t.useImperativeHandle(n,function(){return{onLogout:function(){g?(v(!1),m&&m()):console.log("You must login before logout.")}}}),o.createElement("div",{className:s,onClick:E},l)}),P=t.memo(E);exports.LoginSocialAmazon=s,exports.LoginSocialFacebook=d,exports.LoginSocialGithub=g,exports.LoginSocialGoogle=f,exports.LoginSocialInstagram=_,exports.LoginSocialLinkedin=y,exports.LoginSocialMicrosoft=b,exports.LoginSocialPinterest=C,exports.LoginSocialTwitter=P;
//# sourceMappingURL=index.js.map
